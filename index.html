<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BLACKPINK Solo Sorter</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #f4f4f4;
            margin-top: 50px;
        }
        button {
            padding: 10px 20px;
            background-color: #ff4081;
            color: white;
            border: none;
            margin: 20px;
            cursor: pointer;
        }
        button:hover {
            background-color: #e91e63;
        }
        #rankedList {
            margin-top: 30px;
        }
    </style>
</head>
<body>

    <h1>BLACKPINK Solo Sorter</h1>
    <div id="battle">
        <p>Pick which song you like better!:</p>
        <button id="leftSong" onclick="chooseSong('left')"></button>
        <button id="rightSong" onclick="chooseSong('right')"></button>
    </div>

    <div id="rankedList"></div>

    <script>
        const songs = [
            'SOLO - Jennie',
            'On The Ground - Rosé',
            'Gone - Rosé',
            'Lalisa - Lisa',
            'Money - Lisa',
            'You & Me - Jennie',
            'You & Me (Coachella version) - Jennie',
            'FLOWER - Jisoo',
            'All Eyes on Me - Jisoo',
            'Rockstar - Lisa',
            'Moonlit Floor - Lisa',
            'New Woman - Lisa',
            'APT - Rosé',
            'Mantra - Jennie'
        ];

        let rankings = [];
        let currentBattle = [];
        let mergeSortQueue = [];

        function mergeSortSongs(songList) {
            if (songList.length <= 1) return songList;

            const mid = Math.floor(songList.length / 2);
            const left = songList.slice(0, mid);
            const right = songList.slice(mid);

            // Divide and conquer
            return merge(mergeSortSongs(left), mergeSortSongs(right));
        }

        function merge(left, right) {
            let result = [];

            while (left.length && right.length) {
                mergeSortQueue.push([left[0], right[0]]);
                result.push(null); // Placeholder for merged result
            }

            // Add remaining elements from left or right to the result array
            return result.concat(left).concat(right);
        }

        function startSort() {
            rankings = mergeSortSongs(songs);
            currentBattle = mergeSortQueue.shift();
            displayBattle();
        }

        function displayBattle() {
            if (currentBattle) {
                document.getElementById('leftSong').innerText = currentBattle[0];
                document.getElementById('rightSong').innerText = currentBattle[1];
            } else {
                displayRankings();
            }
        }

        function chooseSong(choice) {
            const winner = choice === 'left' ? currentBattle[0] : currentBattle[1];
            const loser = choice === 'left' ? currentBattle[1] : currentBattle[0];

            // Find where the null is in rankings, replace it with winner or loser
            const winnerIndex = rankings.indexOf(null);
            if (winnerIndex !== -1) {
                rankings[winnerIndex] = winner;
            }
            const loserIndex = rankings.indexOf(null);
            if (loserIndex !== -1) {
                rankings[loserIndex] = loser;
            }

            // Move to the next comparison
            currentBattle = mergeSortQueue.shift();
            displayBattle();
        }

        function displayRankings() {
            let rankedList = '<h2>Your Ranked List of BLACKPINK Solo Songs:</h2><ol>';
            rankings.forEach(song => {
                rankedList += `<li>${song}</li>`;
            });
            rankedList += '</ol>';

            document.getElementById('battle').style.display = 'none'; // Hide the battle section
            document.getElementById('rankedList').innerHTML = rankedList; // Display the ranked list
        }

        // Initialize the sorting process when the page loads
        window.onload = startSort;
    </script>

</body>
</html>